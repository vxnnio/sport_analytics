<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>選手壓力評估查詢 | 運動員系統</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}?v={{ range(1000)|random }}" type="image/x-icon" />
    <link
      rel="icon"
      href="{{ url_for('static', filename='favicon.ico') }}"
      type="image/x-icon"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        background-color: #f4f6fa;
        font-family: "Noto Sans TC", sans-serif;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .page-header {
        text-align: center;
        margin: 50px auto 35px;
        animation: fadeInUp 0.8s ease-out;
      }

      .page-header h1 {
        font-size: 2.5rem;
        font-weight: 800;
        color: #1e3a8a;
        letter-spacing: 1px;
        margin-bottom: 10px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
      }

      .page-header p {
        font-size: 1.2rem;
        color: #6c757d;
        margin: 0 auto;
        max-width: 640px;
      }

      .page-header hr {
        width: 110px;
        height: 4px;
        background: linear-gradient(to right, #007bff, #00c6ff);
        border: none;
        border-radius: 2px;
        margin: 25px auto 0;
      }

      form {
        max-width: 680px;
        margin: 0 auto 40px;
        background: #fff;
        padding: 35px 45px;
        border-radius: 10px;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        animation: fadeInUp 0.9s ease-out;
      }

      form label {
        display: block;
        font-weight: 600;
        font-size: 1.25rem;
        margin-bottom: 12px;
      }

      form select {
        width: 100%;
        padding: 12px 14px;
        font-size: 1.15rem;
        border: 2px solid #ccc;
        border-radius: 8px;
        margin-bottom: 25px;
        transition: border-color 0.3s;
      }

      form select:focus {
        border-color: #007bff;
        outline: none;
      }

      form button {
        width: 100%;
        padding: 14px 0;
        font-size: 1.25rem;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 700;
        transition: background-color 0.3s, transform 0.15s;
      }

      form button:hover {
        background-color: #0056b3;
        transform: translateY(-1px);
      }

      form a {
        display: block;
        margin-top: 20px;
        text-align: center;
        padding: 13px 0;
        font-size: 1.25rem;
        background-color: #6c757d;
        color: white;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 700;
        transition: background-color 0.3s, transform 0.15s;
      }

      form a:hover {
        background-color: #5a6268;
        transform: translateY(-1px);
      }

      .result-card {
        max-width: 680px;
        margin: 0 auto;
        background: #f9f9f9;
        padding: 30px 40px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        animation: fadeInUp 1s ease-out;
      }

      .result-card h3 {
        margin-bottom: 20px;
        color: #007bff;
        font-weight: 700;
      }

      .no-result {
        max-width: 680px;
        margin: 0 auto;
        color: #d9534f;
        font-weight: 600;
        text-align: center;
        animation: fadeInUp 1s ease-out;
      }
    </style>
  </head>

  <body>
    <!-- 頁面標題區 -->
    <div class="page-header">
      <h1>🧠 選手壓力評估查詢</h1>
      <p>即時掌握選手心理壓力狀況，提供個別化支持與建議</p>
      <hr />
    </div>

    <!-- 查詢表單 -->
    <form method="POST">
      <label for="athlete_id">選擇選手：</label>
      <select id="athlete_id" name="athlete_id" required>
        {% for athlete in athletes %}
        <option value="{{ athlete.id }}">{{ athlete.full_name }}</option>
        {% endfor %}
      </select>

      <button type="submit">查詢</button>

      <a href="{{ url_for('coach.dashboard') }}">回到主頁</a>
    </form>

    <!-- 查詢結果 -->
    {% if result %}
    <div class="result-card">
      <hr style="margin-bottom: 20px; border-color: #ddd" />
      <h3>查詢結果：</h3>
      <p><strong>日期：</strong>{{ result.timestamp.strftime("%Y-%m-%d %H:%M") }}</p>
      <p><strong>壓力分數：</strong>{{ score }}</p>
      <p><strong>建議：</strong>{{ suggestion }}</p>
    </div>
    {% elif request.method == 'POST' %}
    <p class="no-result">此選手尚無壓力評估紀錄。</p>
    {% endif %}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
